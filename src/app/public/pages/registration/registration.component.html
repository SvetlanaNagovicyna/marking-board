<div class="window">
  <div class="window__wrap">

    <div class="title">
      <span>Registration form</span>
      <span class="title-red">.</span>
    </div>

    <form class="form" [formGroup]="form" (ngSubmit)="submit()">

      <div
        class="form__control"
        [ngClass]="{invalid: form.controls.name.touched && form.controls.name.errors}"
      >
        <input type="text" placeholder="Surname and Name" formControlName="name">
        <div
          *ngIf="form.controls.name.touched && form.controls.name.invalid"
          class="validation">
          <small *ngIf="form.controls.name.hasError('required')">
            Field title is required
          </small>
        </div>
      </div>

      <div
        class="form__control"
        [ngClass]="{invalid: form.controls.email.touched && form.controls.email.errors}"
      >
        <input type="email" placeholder="Email" formControlName="email">
        <div
          *ngIf="form.controls.email.touched && form.controls.email.invalid"
          class="validation">
          <small *ngIf="form.controls.email.hasError('required')">
            Field email is required
          </small>
          <small *ngIf="form.controls.email.hasError('email')">
            Field must be type email
          </small>
        </div>
      </div>

      <div
        class="form__control"
        [ngClass]="{invalid: form.controls.password.touched && form.controls.password.errors}"
      >
        <input type="password" placeholder="Password" formControlName="password" value="123456789Zaq">
        <div
          *ngIf="form.controls.password.touched && form.controls.password.invalid"
          class="validation">
          <small *ngIf="form.controls.password.hasError('required')">
            Field password is required
          </small>
          <small *ngIf="form.controls.password.hasError('minlength')">
            Password must be more than
            {{form.controls.password.errors?.['minlength'].requaredLength}} characters.
            Now is
            {{form.controls.password.errors?.['minlength'].actualLength}}
          </small>
          <small *ngIf="form.controls.password.hasError('pattern')">
            Password must contain at least one uppercase letter, one lowercase letter, and one digit
          </small>
        </div>
      </div>

      <div
        class="form__control mb-24"
        [ngClass]="{invalid: form.controls.confirmPassword.touched && form.controls.confirmPassword.errors}"
      >
        <input type="password" placeholder="Confirm Password" formControlName="confirmPassword" value="123456789Zaq">
        <div
          *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid"
          class="validation">
          <small *ngIf="form.controls.confirmPassword.hasError('required')">
            Field Confirm Password is required
          </small>
          <small *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.hasError('mismatch')">
            Passwords must match
          </small>
        </div>
      </div>

      <button
        class="btn-red"
        type="submit"
        [disabled]="form.invalid || submitted"
      >
        <svg viewBox="0 0 225 56" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
          <polygon fill="none" points="215.5 43.5 203.83 55.5 0.5 55.5 0.5 0.5 224.5 0.5 224.5 34.67 215.5 43.5"></polygon>
          <polygon fill="transparent" stroke="#FF1822" points="215.5 43.5 203.83 55.5 0.5 55.5 0.5 0.5 224.5 0.5 224.5 34.67 215.5 43.5"></polygon>
        </svg>
        <span>Registration</span>
      </button>

    </form>

    <div class="alert-error" *ngIf="auth.error$ | async as error">
      {{error}}
    </div>

  </div>
</div>
